diff -rupN hyperdex-1.3.0/configure.ac hyperdex-1.3.0-new/configure.ac
--- hyperdex-1.3.0/configure.ac	2014-05-21 03:09:03.000000000 +0800
+++ hyperdex-1.3.0-new/configure.ac	2014-06-01 23:52:35.320204653 +0800
@@ -27,33 +27,33 @@ AC_LANG(C++)
 
 ANAL_WARNINGS
 
-AC_ARG_ENABLE([java-bindings], [AS_HELP_STRING([--enable-java-bindings],
-              [enable the Java bindings @<:@default: no@:>@])],
-              [java_bindings=${enableval}], [java_bindings=no])
-
-JNI_CPPFLAGS=
-if test x"${java_bindings}" = xyes; then
-    AC_PROG_JAR
-    AC_PROG_JAVAC
-    AC_JNI_INCLUDE_DIR
-    found_jnidir=no
-    for jnidir in ${JNI_INCLUDE_DIRS}
-    do
-        if test x"${found_jnidir}" = xno; then
-            JNI_CPPFLAGS="-I${jnidir} -I${jnidir}/linux"
-            found_jnidir=yes
-        fi
-    done
-    if test x"${found_jnidir}" = xno; then
-        AC_MSG_ERROR([
--------------------------------------------------
-HyperDex relies upon the JNI for Java bindings.
-No JNI include dir could be found.
-Set JAVAC to point to your Java compiler.
--------------------------------------------------])
-    fi
-fi
-AC_SUBST([JNI_CPPFLAGS], [${JNI_CPPFLAGS}])
+#AC_ARG_ENABLE([java-bindings], [AS_HELP_STRING([--enable-java-bindings],
+              #[enable the Java bindings @<:@default: no@:>@])],
+              #[java_bindings=${enableval}], [java_bindings=no])
+
+#JNI_CPPFLAGS=
+#if test x"${java_bindings}" = xyes; then
+    #AC_PROG_JAR
+    #AC_PROG_JAVAC
+    #AC_JNI_INCLUDE_DIR
+    #found_jnidir=no
+    #for jnidir in ${JNI_INCLUDE_DIRS}
+    #do
+        #if test x"${found_jnidir}" = xno; then
+            #JNI_CPPFLAGS="-I${jnidir} -I${jnidir}/linux"
+            #found_jnidir=yes
+        #fi
+    #done
+    #if test x"${found_jnidir}" = xno; then
+        #AC_MSG_ERROR([
+#-------------------------------------------------
+#HyperDex relies upon the JNI for Java bindings.
+#No JNI include dir could be found.
+#Set JAVAC to point to your Java compiler.
+#-------------------------------------------------])
+    #fi
+#fi
+#AC_SUBST([JNI_CPPFLAGS], [${JNI_CPPFLAGS}])
 
 # Checks for libraries.
 AC_CHECK_LIB([popt], [poptGetContext], [has_popt=true], [AC_MSG_ERROR([
@@ -83,11 +83,11 @@ Please install libjson to continue.
 -------------------------------------------------])
 fi
 
-PKG_CHECK_MODULES([PO6], [libpo6 >= 0.5])
-PKG_CHECK_MODULES([E], [libe >= 0.7])
-PKG_CHECK_MODULES([BUSYBEE], [busybee >= 0.5])
-PKG_CHECK_MODULES([HYPERLEVELDB], [libhyperleveldb >= 1.0])
-PKG_CHECK_MODULES([REPLICANT], [replicant >= 0.6])
+#PKG_CHECK_MODULES([PO6], [libpo6 >= 0.5])
+#PKG_CHECK_MODULES([E], [libe >= 0.7])
+#PKG_CHECK_MODULES([BUSYBEE], [busybee >= 0.5])
+#PKG_CHECK_MODULES([HYPERLEVELDB], [libhyperleveldb >= 1.0])
+#PKG_CHECK_MODULES([REPLICANT], [replicant >= 0.6])
 
 # Checks for header files.
 AC_CHECK_HEADERS([netinet/in.h stdint.h stdlib.h sys/socket.h unistd.h])
diff -rupN hyperdex-1.3.0/hyperdex.cc hyperdex-1.3.0-new/hyperdex.cc
--- hyperdex-1.3.0/hyperdex.cc	2014-04-03 01:18:13.000000000 +0800
+++ hyperdex-1.3.0-new/hyperdex.cc	2014-06-01 23:52:47.744204346 +0800
@@ -35,6 +35,10 @@
 // e
 #include <e/subcommand.h>
 
+#include <iostream>
+
+#include "tools/common.h"
+
 int
 main(int argc, const char* argv[])
 {
@@ -60,10 +64,14 @@ main(int argc, const char* argv[])
     cmds.push_back(e::subcommand("backup-manager",        "Manage incremental backups of the entire HyperDex cluster"));
     cmds.push_back(e::subcommand("raw-backup",            "Take a raw backup of a single HyperDex daemon"));
     cmds.push_back(e::subcommand("wait-until-stable",     "Wait for the cluster to become stable on the new configuration"));
+
+
+    std::string hyperdex_exec_dir = hyperdex::get_hyperdex_exec_dir();
+
     return dispatch_to_subcommands(argc, argv,
                                    "hyperdex", "HyperDex",
                                    PACKAGE_VERSION,
                                    "hyperdex-",
-                                   "HYPERDEX_EXEC_PATH", HYPERDEX_EXEC_DIR,
+                                   "HYPERDEX_EXEC_PATH", hyperdex_exec_dir.c_str(),
                                    &cmds.front(), cmds.size());
 }
diff -rupN hyperdex-1.3.0/tools/common.h hyperdex-1.3.0-new/tools/common.h
--- hyperdex-1.3.0/tools/common.h	2014-01-26 10:00:40.000000000 +0800
+++ hyperdex-1.3.0-new/tools/common.h	2014-06-01 23:52:57.104204114 +0800
@@ -30,6 +30,7 @@
 
 // POSIX
 #include <sys/stat.h>
+#include <stdint.h>
 
 // po6
 #include <po6/pathname.h>
@@ -86,19 +87,31 @@ class connect_opts
 #define HYPERDEX_LIB_NAME "libhyperdex-coordinator"
 #pragma GCC diagnostic push
 #pragma GCC diagnostic ignored "-Wlarger-than="
+
+std::string get_hyperdex_exec_dir(void){
+    std::string hyperdex_exec_dir(HYPERDEX_EXEC_DIR);
+    const char* sz_hyperdex_exec_dir = getenv("HYPERDEX_EXEC_DIR");
+    if (sz_hyperdex_exec_dir){
+        hyperdex_exec_dir = std::string(sz_hyperdex_exec_dir);
+    }
+    return hyperdex_exec_dir;
+}
+
 bool
 locate_coordinator_lib(const char* argv0, po6::pathname* path)
 {
     // find the right library
     std::vector<po6::pathname> paths;
     const char* env = getenv("HYPERDEX_COORD_LIB");
-    static const char* exts[] = { "", ".so.0.0.0", ".so.0", ".so", ".dylib", 0 };
+    static const char* exts[] = { "", ".a", ".so.0.0.0", ".so.0", ".so", ".dylib", 0 };
+
+    std::string hyperdex_exec_dir = get_hyperdex_exec_dir();
 
     for (size_t i = 0; exts[i]; ++i)
     {
         std::string base(HYPERDEX_LIB_NAME);
         base += exts[i];
-        paths.push_back(po6::join(HYPERDEX_EXEC_DIR, base));
+        paths.push_back(po6::join(hyperdex_exec_dir, base));
         paths.push_back(po6::join(po6::pathname(argv0).dirname(),
                                   po6::join(".libs", base)));
 
