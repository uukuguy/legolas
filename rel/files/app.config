%% -*- erlang -*-
[
 %% Riak Core config
 {riak_core, [
              {cluster_name,          "{{cluster_name}}"},
              {target_n_val,          {{target_n_val}} },
              {ring_creation_size,    {{ring_creation_size}} },
              %{default_bucket_props, {{default_bucket_props}} },
              %{choose_claim_fun, {{choose_claim_fun}} },
              %{wants_claim_fun, {{wants_claim_fun}} },
              %% Default location of ringstate
              {ring_state_dir, "{{ring_state_dir}}"},

              %% http is a list of IP addresses and TCP ports that the Riak
              %% HTTP interface will bind.
              {http, [ {"{{web_ip}}", {{web_port}} } ]},

              %% https is a list of IP addresses and TCP ports that the Riak
              %% HTTPS interface will bind.
              %{https, [{ "{{web_ip}}", {{web_port}} }]},

              %% default cert and key locations for https can be overridden
              %% with the ssl config variable
              %{ssl, [
              %       {certfile, "etc/cert.pem"},
              %       {keyfile, "etc/key.pem"}
              %      ]},

              %% riak_handoff_port is the TCP port that Riak uses for
              %% intra-cluster data handoff.
              {handoff_port, {{handoff_port}} }
             ]},

 %% SASL config
 {sasl, [
         {sasl_error_logger, {file, "log/sasl-error.log"}},
         {errlog_type, error},
         {error_logger_mf_dir, "log/sasl"},      % Log directory
         {error_logger_mf_maxbytes, 10485760},   % 10 MB max file size
         {error_logger_mf_maxfiles, 5}           % 5 files max
        ]},

 %% Lager config
 {lager, [
          {handlers, 
           [
            %{formatter_config, [time, " [", severity, "] ", pid, " ", module, ":", line, " - ",  message, "\n"]},
            %{lager_console_backend, debug},
            {lager_console_backend, [notice, {lager_default_formatter, [time, " [", severity, "] ", pid, "@", node, " ", module, ":", function, "(Line ", line, ") ", message, " \n"]}]},
            {lager_file_backend, 
             [
              {file, "log/error.log"},
              {level, error},
              {size, 10485760},
              {date, "$D0"},
              {count, 7}
             ]},
            {lager_file_backend, 
             [
              {file, "log/running.log"},
              {level, info},
              {size, 10485760},
              {date, "$D0"},
              {count, 7}
             ]}
           ]
          },
          {colored, true}
         ]},

 %% Legolas config
 {legolas, [
          {http_port, {{legolas_http_port}} },
          {http_listeners, {{legolas_http_listeners}} },
          {storage_backend, {{legolas_storage_backend}} },
          {chash_N, {{legolas_chash_N}} },
          {chash_R, {{legolas_chash_R}} },
          {chash_W, {{legolas_chash_W}} }
         ]}
].
